{"uid":"70df1a303d5a95d6","name":"Сравнение ответа API с эталонным JSON","fullName":"tests.test_compare.TestCompareJSON#test_compare_json_response","historyId":"5914e5b668d67363e06161e608241804","time":{"start":1745406204395,"stop":1745406206124,"duration":1729},"description":"Отправляем POST-запрос и сравниваем JSON-ответ с локальным файлом response.json","descriptionHtml":"<p>Отправляем POST-запрос и сравниваем JSON-ответ с локальным файлом response.json</p>\n","status":"failed","statusMessage":"AssertionError: Статус код не 200: 500\nassert 500 == 200\n +  where 500 = <Response [500]>.status_code","statusTrace":"self = <test_compare.TestCompareJSON object at 0x7f1a71b29f70>\n\n    @allure.title(\"Сравнение ответа API с эталонным JSON\")\n    @allure.description(\"Отправляем POST-запрос и сравниваем JSON-ответ с локальным файлом response.json\")\n    def test_compare_json_response(self):\n        url = \"https://k3s-sier.evolenta.tech/authorize\"\n        payload = {\n            \"login\": \"pankratov\",\n            \"password\": \"0pFAYSGJ0\"\n        }\n    \n        response = requests.post(url, data=payload)\n    \n        print(response.status_code)\n        print(response.text)\n    \n    \n        with allure.step(\"POST-запрос к API\"):\n            response = requests.post(url, json=payload)\n            allure.attach(response.text, name=\"API Response\", attachment_type=allure.attachment_type.JSON)\n>           assert response.status_code == 200, f\"Статус код не 200: {response.status_code}\"\nE           AssertionError: Статус код не 200: 500\nE           assert 500 == 200\nE            +  where 500 = <Response [500]>.status_code\n\ntests/test_compare.py:26: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"Отправляем POST-запрос и сравниваем JSON-ответ с локальным файлом response.json","status":"failed","statusMessage":"AssertionError: Статус код не 200: 500\nassert 500 == 200\n +  where 500 = <Response [500]>.status_code","statusTrace":"self = <test_compare.TestCompareJSON object at 0x7f1a71b29f70>\n\n    @allure.title(\"Сравнение ответа API с эталонным JSON\")\n    @allure.description(\"Отправляем POST-запрос и сравниваем JSON-ответ с локальным файлом response.json\")\n    def test_compare_json_response(self):\n        url = \"https://k3s-sier.evolenta.tech/authorize\"\n        payload = {\n            \"login\": \"pankratov\",\n            \"password\": \"0pFAYSGJ0\"\n        }\n    \n        response = requests.post(url, data=payload)\n    \n        print(response.status_code)\n        print(response.text)\n    \n    \n        with allure.step(\"POST-запрос к API\"):\n            response = requests.post(url, json=payload)\n            allure.attach(response.text, name=\"API Response\", attachment_type=allure.attachment_type.JSON)\n>           assert response.status_code == 200, f\"Статус код не 200: {response.status_code}\"\nE           AssertionError: Статус код не 200: 500\nE           assert 500 == 200\nE            +  where 500 = <Response [500]>.status_code\n\ntests/test_compare.py:26: AssertionError","steps":[{"name":"POST-запрос к API","time":{"start":1745406205417,"stop":1745406206124,"duration":707},"status":"failed","statusMessage":"AssertionError: Статус код не 200: 500\nassert 500 == 200\n +  where 500 = <Response [500]>.status_code\n","statusTrace":"  File \"/home/runner/work/auth/auth/tests/test_compare.py\", line 26, in test_compare_json_response\n    assert response.status_code == 200, f\"Статус код не 200: {response.status_code}\"\n","steps":[],"attachments":[{"uid":"1ed64f4b02113418","name":"API Response","source":"1ed64f4b02113418.json","type":"application/json","size":3963}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true}],"attachments":[{"uid":"ff53533a34637809","name":"stdout","source":"ff53533a34637809.txt","type":"text/plain","size":8407}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":2,"hasContent":true},"afterStages":[],"labels":[{"name":"suite","value":"Сравнение JSON-ответа с эталонным"},{"name":"parentSuite","value":"tests"},{"name":"subSuite","value":"TestCompareJSON"},{"name":"host","value":"fv-az2249-43"},{"name":"thread","value":"2280-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_compare"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"70df1a303d5a95d6.json","parameterValues":[]}